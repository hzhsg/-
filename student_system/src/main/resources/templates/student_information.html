<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
  <!--<![endif]-->
  <!-- Begin Head -->
  <head>
    <title>作业详情</title>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <meta name="MobileOptimized" content="320" />
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" href="static/css/fonts.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="static/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="static/css/font-awesome.min.css"
    />
    <link rel="stylesheet" type="text/css" href="static/css/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="static/css/style.css" />
    <link rel="stylesheet" id="theme-change" type="text/css" href="" />
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
  </head>

  <body>
    <!-- Main Body -->
    <div class="page-wrapper">
      <!-- Header Start -->
      <header class="header-wrapper main-header">
        <div class="header-inner-wrapper">
          <div class="logo-wrapper">
            <a href="" class="admin-logo">
              <img src="static/picture/title.png" alt="" />
            </a>
          </div>
          <div class="header-right">
            <div class="serch-wrapper">
              <form>
                <input type="text" placeholder="Search Here..." />
              </form>
              <a class="search-close" href="javascript:void(0);"
                ><span class="icofont-close-line"></span
              ></a>
            </div>
            <div class="header-left">
              <div class="header-links">
                <a href="javascript:void(0);" class="toggle-btn">
                  <span></span>
                </a>
              </div>
            </div>
            <div class="header-controls">
              <div class="user-info-wrapper header-links">
                <a href="javascript:void(0);" class="user-info">
                  <img src="static/picture/image.jpg" alt="" class="user-img"/>
                </a>
                <div class="user-info-box">
                  <div class="drop-down-header">
                    <h4 th:text="${name}">huzhihang</h4>
                    <p>教师</p>
                  </div>
                  <ul>
                    <li>
                      <a href="profile">
                        <i class="far fa-edit"></i> 个人信息
                      </a>
                    </li>
                    <li>
                      <form action="doLogout" method="post">
                        <button type="submit">
                          <i class="fas fa-sign-out-alt"></i> logout
                        </button>
                      </form>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- Sidebar Start -->
      <aside class="sidebar-wrapper">
        <div class="side-menu-wrap">
          <ul class="main-menu">
            <li>
              <a href="/" class="active">
                <span class="icon-menu feather-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-home"
                  >
                    <path
                      d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                    ></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                  </svg>
                </span>
                <span class="menu-text"> 首页 </span>
              </a>
            </li>
            <li>
              <a href="courseHaveJoined">
                <span class="icon-menu feather-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-users"
                  >
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                  </svg>
                </span>
                <span class="menu-text"> 课程 </span>
              </a>
            </li>
            <li>
              <a href="assignment">
                <span class="icon-menu feather-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-layers"
                  >
                    <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                    <polyline points="22 17 12 22 2 17"></polyline>
                    <polyline points="2 12 12 17 22 12"></polyline>
                  </svg>
                </span>
                <span class="menu-text"> 作业 </span>
              </a>
            </li>
            <li>
              <a href="notification">
                <span class="icon-menu feather-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewbox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-mail"
                  >
                    <path
                      d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                    ></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                  </svg>
                </span>
                <span class="menu-text"> 通知 </span>
              </a>
            </li>
          </ul>
        </div>
      </aside>
      <!-- Container Start -->
      <div class="page-wrapper">
        <div class="main-content">
          <!-- Page Title Start -->
          <div class="row">
            <div class="colxl-12 col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="page-title-wrapper">
                <div class="page-title-box ad-title-box-use">
                  <h4 th:text="${courseName}" class="page-title bold">首页</h4>
                  <p>课程序号：<span th:text="${course_id}"></span></p>
                  <p>教师名：<span th:text="${teacher_name}"></span></p>
                  <p th:text="${courseDescription}"></p>
                </div>
              </div>
            </div>
          </div>
          <!-- Table Start -->
          <div class="row">
            <!-- Styled Table Card-->
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="card table-card">
                <ul>
                  <li class="container-grid">
                    <div class="card-header pb-0" style="text-align: center;">
                      <h4>学生列表</h4>
                      <a href="course_detail" class="btn btn-primary mt-2 float-left mr-2">作业列表</a>
                    </div>
                  </li>
                </ul>
                <style>
                  .container-grid {
                    display: grid;
                    grid-template-columns: 1fr auto; /* 定义两列，第一列为1fr（flex fraction），第二列为自动大小 */
                    align-items: center; /* 垂直居中 */
                  }
                  .add-group {
                    text-align: right; /* 文本右对齐 */
                  }
                </style>

                <div class="card-body">
                  <div class="chart-holder">
                    <div class="table-responsive">
                      <table class="table table-styled mb-0">
                        <thead>
                          <tr>
                            <th>学号</th>
                            <th>学生姓名</th>
                            <th>学院</th>
                            <th>加入课程日期</th>
                            <th>查看学生</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr th:each="student:${studentList}" th:data-student-id="${student.getStudent_id()}">
                            <td th:text="${student.getStudent_id()}"></td>
                            <td th:if="${student.getName()}" th:text="${student.getName()}"></td>
                            <td th:unless="${student.getName()}" th:text="${student.getUsername()}"></td>
                            <td th:if="${student.getDepartment()}" th:text="${student.getDepartment()}"></td>
                            <td th:unless="${student.getDepartment()}">尚未设置</td>
                            <td th:text="${#dates.format(student.getEnrollment_date(), 'yyyy-MM-dd HH:mm')}"></td>
                            <td>
                              <a href="javascript:void(0);" onclick="viewStudent(this.closest('tr').dataset.studentId)" class="badge badge-primary">查看学生</a>
                            </td>
                          </tr>
                          <!-- Additional rows omitted for brevity -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Slide Setting Box -->

    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/popper.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/custom.js"></script>
  </body>
</html>

<script>
  function viewStudent(studentId){
    axios.post('/viewStudent',{
      studentId:studentId
    }, {
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      }
    }).then(({data})=> {
      if (data === "success") {
        // 如果是，则跳转到登录页面
        window.location.href = '/studentDetail';
      } else {
        alert("未接收到学号，请稍后再试");
      }
    })
  }
</script>
